
<div class="card">
  <app-filter [filters]="filters" (filterChanged)="onFilterChanged($event)"
      (triggerParentFunction)="search()">
  </app-filter>
  <button style="width:77px" class="btn btn-primary" (click)="search()">Search</button>
</div>

<div class="container mt-4">
  <!-- Employee Section -->

  <div *ngIf="userAccessLevel == UserType.EMPLOYEE" class="row">
    <div class="col-md-4 mb-4">
      <div style="background-color: #00a9c8; " class="card shadow-sm dashboard-bg">
        <div class="card-body">
          <h3 class="card-title">Pay Generated Amount</h3>
          <h2 class="card-text">{{dashboardData.employee.payGeneratedAmount}}</h2>
        </div>
      </div>
    </div>
    <div class="col-md-4 mb-4">
      <div style="background-color: #ff3078; " class="card shadow-sm dashboard-bg">
        <div class="card-body">
          <h3 class="card-title">Working Days</h3>
          <h2 class="card-text">{{dashboardData.employee.workingDays}}</h2>
        </div>
      </div>
    </div>
    <div class="col-md-4 mb-4">
      <div style="background-color: #02c3a4; " class="card shadow-sm dashboard-bg">
        <div class="card-body">
          <h3 class="card-title">Day Wise Status</h3>
          <h2  [ngStyle]="{'color': dashboardData.employee.dayWiseStatus == 'Present' ? 'green' : '#631313'}" class="card-text">{{dashboardData.employee.dayWiseStatus}}</h2>
        </div>
      </div>
    </div>
  </div>

  <!-- Manager Section -->

  <div *ngIf="userAccessLevel == UserType.MANAGER" class="row">
    <div class="col-md-4 mb-4">
      <div style="background-color: #00a9c8; " class="card shadow-sm dashboard-bg">
        <div class="card-body">
          <h3 class="card-title">Total Employees</h3>
          <h2 class="card-text">{{dashboardData.manager.totalEmployees}}</h2>
        </div>
      </div>
    </div>
    <div class="col-md-4 mb-4">
      <div style="background-color: #ff3078; " class="card shadow-sm dashboard-bg">
        <div class="card-body">
          <h3 class="card-title">Designation Wise Count</h3>
          <h2 class="card-text">{{dashboardData.manager.totalDesignationWiseCount.length}}</h2>
        </div>
      </div>
    </div>
    <div class="col-md-4 mb-4">
      <div style="background-color: #02c3a4; " class="card shadow-sm dashboard-bg">
        <div class="card-body">
          <h3 class="card-title">Employee Present Status</h3>
          <h2  class="card-text">{{dashboardData.manager.employeePresentStatus}}</h2>
        </div>
      </div>
    </div>
  </div>

  <!-- Vendor Section -->

  <div *ngIf="userAccessLevel == UserType.VENDOR" class="row">
    
    <div class="col-md-4 mb-4">
      <div style="background-color: #00a9c8;" class="card shadow-sm dashboard-bg">
        <div class="card-body">
          
          <h3 class="card-title">
          
            Total Company
          </h3>
          <h2 class="card-text">{{dashboardData.vendor.totalCompany}}</h2>
        </div>
      </div>
    </div>
    <div class="col-md-4 mb-4">
      <div style="background-color: #ff3078; " class="card shadow-sm dashboard-bg">
        <div class="card-body">
          <h3 class="card-title">Total Designation</h3>
          <h2 class="card-text">{{dashboardData.vendor.totalDesignationWiseCount.length}}</h2>
        </div>
      </div>
    </div>
    <div class="col-md-4 mb-4">
      <div style="background-color: #02c3a4; " class="card shadow-sm dashboard-bg">
        <div class="card-body">
          <h3 class="card-title">Total Employee</h3>
          <h2 class="card-text">{{dashboardData.vendor.totalEmployees}}</h2>
        </div>
      </div>
    </div>
    <div class="col-md-4 mb-4">
      <div style="background-color: #ffb902; " class="card shadow-sm dashboard-bg">
        <div class="card-body">
          <h3 class="card-title">Payment Generated</h3>
          <h2 class="card-text">{{dashboardData.vendor.paymentGeneratedCount}}</h2>
        </div>
      </div>
    </div>
    <div class="col-md-4 mb-4">
      <div style="background-color: #b834a2; " class="card shadow-sm dashboard-bg">
        <div class="card-body">
          <h3 class="card-title">Payment Not Generated</h3>
          <h2 class="card-text">{{dashboardData.vendor.paymentNotGeneratedCount }}</h2>
        </div>
      </div>
    </div>
    <div class="col-md-4 mb-4">
      <div style="background-color: #cc293a; " class="card shadow-sm dashboard-bg">
        <div class="card-body">
          <h3 class="card-title">Payment Processed </h3>
          <h2 class="card-text">{{dashboardData.vendor.paymentProcessedForSelectedMonth | currency:'INR'}}</h2>
        </div>
      </div>
    </div>
  </div>

  <!-- State Section -->

  <div *ngIf="userAccessLevel == UserType.STATE_ADMIN" class="row">
    <div class="col-md-4 mb-4">
      <div style="background-color: #00a9c8; " class="card shadow-sm dashboard-bg">
        <div class="card-body">
          <h3 class="card-title">Total Vendor</h3>
          <h3 class="card-text">{{dashboardData.state.totalVendor}}</h3>
        </div>
      </div>
    </div>
    <div class="col-md-4 mb-4">
      <div style="background-color: #ff3078; " class="card shadow-sm dashboard-bg">
        <div class="card-body">
          <h3 class="card-title">Total Company</h3>
          <h2 class="card-text">{{dashboardData.state.totalCompany}}</h2>
        </div>
      </div>
    </div>
    <div class="col-md-4 mb-4">
      <div style="background-color: #02c3a4; " class="card shadow-sm dashboard-bg">
        <div class="card-body">
          <h3 class="card-title">Total Designation</h3>
          <h2 class="card-text">{{dashboardData.state.totalDesignationWiseCount.length}}</h2>
        </div>
      </div>
    </div>
    <div class="col-md-4 mb-4">
      <div style="background-color: #ffb902; " class="card shadow-sm dashboard-bg">
        <div class="card-body">
          <h3 class="card-title">Payment Generated</h3>
          <h2 class="card-text">{{dashboardData.state.paymentGeneratedCount }}</h2>
        </div>
      </div>
    </div>
    <div class="col-md-4 mb-4">
      <div style="background-color: #b834a2; " class="card shadow-sm dashboard-bg">
        <div class="card-body">
          <h3 class="card-title">Payment Not Generated</h3>
          <h2 class="card-text">{{dashboardData.state.paymentNotGeneratedCount }}</h2>
        </div>
      </div>
    </div>
    <div class="col-md-4 mb-4">
      <div style="background-color: #cc293a; " class="card shadow-sm dashboard-bg">
        <div class="card-body">
          <h3 class="card-title">Payment Processed </h3>
          <h2 class="card-text">{{dashboardData.state.paymentProcessedForSelectedMonth | currency:'INR'}}</h2>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="container mt-4">
  <table class="table table-striped">
    <thead>
      <tr>
        <th>#</th>
        <th>Month</th>
        <th>Year</th>
        <th>Total Employee</th>
        <th>Payment Generated Count</th>
        <th>Payment Not Generated Count</th>
        <th>Payment Processed</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let payment of paymentGeneratedList; let i =index">
        <td>{{i+1}}</td>
        <td>{{ payment.month | monthName }}</td>
        <td>{{ payment.year }}</td>
        <td>{{ payment.totalEmployee }}</td>
        <td>{{ payment.paymentGeneratedCount }}</td>
        <td>{{ payment.paymentNotGeneratedCount }}</td>
        <td>{{ payment.totalAmount | currency:'INR' }}</td>
      </tr>
    </tbody>
  </table>
  
  
</div>


<div class="container mt-4">
  <div class="row">
    <div class="col-md-6">
      <div *ngIf="paymentGeneratedList.length > 0; else noData">
        <app-chart
          [chartData]="chartData"
          [chartType]="chartType"
          [chartOptions]="chartOptions"
          [chartTitle]="'Payment Generation Graph'"
          chartId="paymentGeneratedChart">
        </app-chart>
      </div>
      
      <ng-template #noData>
        <p>No payment generated data available.</p>
      </ng-template>
    </div>

    <div class="col-md-6">
      <div *ngIf="paymentGeneratedList.length > 0; else noData">
        <app-chart [chartData]="chartDataForPaymentAmount" 
                    [chartOptions]="chartOptionsForPaymentAmount" 
                    [chartType]="'line'" 
                    [chartTitle]="'Payment Processed Graph'"
                    [chartId]="'paymentAmountChart'">
        </app-chart>
      </div>
      
      <ng-template #noData>
        <p>No payment generated data available.</p>
      </ng-template>
    </div>
    
  </div>
</div>