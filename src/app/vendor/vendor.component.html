<div class="container">
    <h2>Employee Work Details</h2>
  
    <div class="card">
      <div class="card-body">
          <!-- State, City, and Company Selection Section -->
          <div class="row mb-4">
              <!-- State Dropdown -->
              <div  class="col-md-4">
                  <label for="state">State</label>
                  <select id="state" class="form-control" [(ngModel)]="selectedStateId" (change)="onStateChange()">
                      <option value="" disabled selected>Select State</option>
                      <option *ngFor="let state of states" [value]="state.stateId">{{ state.stateName }}</option>
                  </select>
              </div>

              <!-- City Dropdown -->
              <div class="col-md-4">
                  <label for="city">City</label>
                  <select id="city" class="form-control" [(ngModel)]="selectedCityId" (change)="onCityChange()">
                      <option value="" disabled selected>Select City</option>
                      <option *ngFor="let city of cities" [value]="city.cityId">{{ city.cityName }}</option>
                  </select>
              </div>

              <!-- Company Dropdown -->
              <div  class="col-md-8">
                  <label for="company">Company</label>
                 <select  id="company" class="form-control" [(ngModel)]="selectedCompanyId"
                      (change)="onCompanyChange()">
                      <option value="" disabled selected>Select Company</option>
                      <option *ngFor="let company of companies" [value]="company.companyId">{{ company.companyFName }}
                      </option>
                  </select>
              </div>
          </div>

         
      </div>
  </div>
  <br>
  <div class="card">
      <div class="card-body">
          <!-- Month and Year Selector -->
          <div class="row mb-3">
              <div class="col d-flex justify-content-between">
                  <!-- Month Selector -->
                  <select [(ngModel)]="selectedMonth" (change)="onMonthYearChange()" class="form-control w-25">
                      <option *ngFor="let month of months" [value]="month.number">{{ month.name }}</option>
                  </select>

                  <!-- Year Selector -->
                  <select [(ngModel)]="selectedYear" (change)="onMonthYearChange()" class="form-control w-25">
                      <option *ngFor="let year of years" [value]="year">{{ year }}</option>
                  </select>
              </div>
          </div>

      </div>
  </div>
  
  <button class="btn btn-primary" (click)="fetchPayRecordsbyComp()">Search</button>
    
  <div class="container mt-4">
    <h3>Vendor Payment Details</h3>
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th scope="col">Action</th>
          <th scope="col">Total Payable Amount</th>
          <th scope="col">GST</th>
          <th scope="col">Service Charge</th>
          <th scope="col">TDS</th>
          <th scope="col">Net Amount</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let vendor of companyVendors">
          <td>
            <button class="btn btn-primary" (click)="openVendorModal(vendor)">Update</button>
          </td>
          <td>{{ vendor.totalPayableAmount | currency }}</td>
          <td>{{ vendor.gst | currency }}</td>
          <td>{{ vendor.serviceCharge | currency }}</td>
          <td>{{ vendor.tds | currency }}</td>
          <td>{{ vendor.netAmount | currency }}</td>
        </tr>
      </tbody>
    </table>
  </div>
  
  <app-common-dialog
    [showDialog]="isVendorModalOpen"
    [showCloseIcon]="true"
    [dialogTitle]="'Update Vendor Details'"
    (closeDialog)="isVendorModalOpen = false"
    [showSubmitButton]="true"
    (submitDialog)="updateVendorModal()"
    [maxWidth]="'900px'">

    <div class="row">
      <div class="col-md-6">
        <label for="totalPayableAmount">Total Payable Amount:</label>
        <input  [disabled]="true" type="number" class="form-control" id="totalPayableAmount" [(ngModel)]="selectedVendor.totalPayableAmount">
      </div>
      <div class="col-md-6">
        <label for="gst">GST:</label>
        <input [disabled]="true" type="number" class="form-control" id="gst" [(ngModel)]="selectedVendor.gst">
      </div>
    </div>

    <div class="row">
      <div class="col-md-6">
        <label for="serviceCharge">Service Charge:</label>
        <input [disabled]="true" type="number" class="form-control" id="serviceCharge" [(ngModel)]="selectedVendor.serviceCharge">
      </div>
      <div class="col-md-6">
        <label for="tds">TDS:</label>
        <input [disabled]="true" type="number" class="form-control" id="tds" [(ngModel)]="selectedVendor.tds">
      </div>
    </div>

    <div class="row">
      <div class="col-md-6">
        <label for="netAmount">Net Amount:</label>
        <input  [disabled]="true" type="number" class="form-control" id="netAmount" [(ngModel)]="selectedVendor.netAmount">
      </div>
    </div>

    <div class="row">
      <div class="col-md-6">
        <label for="paymentStatus">Payment Status:</label>
        <select  class="form-control" id="paymentStatus" [(ngModel)]="selectedVendor.paymentStatus">
          <option value="Paid">Paid</option>
          <option value="Pending">Pending</option>
        </select>
      </div>

      <!--remarks-->
      <div class="col-md-6">
        <label for="remarks">Remarks:</label>
        <input   type="text" class="form-control" id="remarks" [(ngModel)]="selectedVendor.remarks">
      </div>
    </div>

  </app-common-dialog>

  </div>
  